module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},84954,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(87924),c=a.i(72131);let d="http://192.168.1.34:3221/DailyUpdate";function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)({syllabusTypeId:"",classSyllabusId:"",subjectId:"",chapterNumber:"",chapterName:""}),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)("new"),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)({type:"",text:""});(0,c.useEffect)(()=>{(async()=>{try{let[a,b,c]=await Promise.all([fetch(`${d}/syllabustypes`),fetch(`${d}/classes`),fetch(`${d}/subjects`)]);e(await a.json()),g(await b.json()),i(await c.json())}catch(a){y({type:"error",text:"Failed to load initial data. Check API connection."})}finally{w(!1)}})()},[]);let z=(0,c.useCallback)(async()=>{let{syllabusTypeId:a,classSyllabusId:b,subjectId:c}=j;if(!a||!b||!c)return void o([]);u(!0);try{let e=`${d}/chapters-by-filter?syllabusTypeId=${a}&classSyllabusId=${b}&subjectId=${c}`,f=await fetch(e);if(!f.ok)throw Error("Could not fetch chapters.");let g=await f.json();o(g)}catch(a){y({type:"error",text:a.message})}finally{u(!1)}},[j]);(0,c.useEffect)(()=>{z()},[j.syllabusTypeId,j.classSyllabusId,j.subjectId,z]);let A=a=>{let{name:b,value:c}=a.target;k(a=>({...a,[b]:c}))},B=async a=>{a.preventDefault(),y({type:"",text:""});let b=l.split("\n").filter(a=>""!==a.trim());if(0===b.length)return void y({type:"error",text:"Please enter at least one topic."});try{let a;if("new"===p){let c=JSON.stringify({...j,topics:b});a=await fetch(`${d}/add-chapter-with-topics`,{method:"POST",headers:{"Content-Type":"application/json"},body:c})}else{let c=JSON.stringify({chapterId:r.id,topics:b});a=await fetch(`${d}/add-topics-to-chapter`,{method:"POST",headers:{"Content-Type":"application/json"},body:c})}let c=await a.json();if(!a.ok)throw Error(c.message);y({type:"success",text:c.message}),m(""),"new"===p&&k(a=>({...a,chapterNumber:"",chapterName:""})),z()}catch(a){y({type:"error",text:a.message})}};return v?(0,b.jsx)("div",{className:"text-center p-10",children:"Loading form data..."}):(0,b.jsx)("main",{className:"bg-slate-50 min-h-screen p-4 sm:p-8",children:(0,b.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"new"===p?"Add New Chapter":"Add Topics to Chapter"}),"addTopics"===p&&(0,b.jsx)("button",{onClick:()=>{q("new"),s(null),k(a=>({...a,chapterNumber:"",chapterName:""})),m(""),y({type:"",text:""})},className:"text-sm bg-gray-200 text-gray-700 font-semibold py-1 px-3 rounded-lg hover:bg-gray-300",children:"+ Add New Chapter Instead"})]}),(0,b.jsxs)("form",{onSubmit:B,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"syllabusTypeId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Syllabus"}),(0,b.jsxs)("select",{name:"syllabusTypeId",value:j.syllabusTypeId,onChange:A,required:!0,disabled:"addTopics"===p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Select Syllabus"}),a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.syllabus_name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"classSyllabusId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),(0,b.jsxs)("select",{name:"classSyllabusId",value:j.classSyllabusId,onChange:A,required:!0,disabled:"addTopics"===p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Select Class"}),f.map(a=>(0,b.jsx)("option",{value:a.id,children:a.class_name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"subjectId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,b.jsxs)("select",{name:"subjectId",value:j.subjectId,onChange:A,required:!0,disabled:"addTopics"===p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"Select Subject"}),h.map(a=>(0,b.jsx)("option",{value:a.id,children:a.subject_name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"md:col-span-1",children:[(0,b.jsx)("label",{htmlFor:"chapterNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Chapter No."}),(0,b.jsx)("input",{type:"number",name:"chapterNumber",value:j.chapterNumber,onChange:A,placeholder:"e.g., 10",required:!0,disabled:"addTopics"===p,className:"w-full px-3 py-2 border border-gray-300 rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{htmlFor:"chapterName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Chapter Name"}),(0,b.jsx)("input",{type:"text",name:"chapterName",value:j.chapterName,onChange:A,placeholder:"e.g., Light - Reflection",required:!0,disabled:"addTopics"===p,className:"w-full px-3 py-2 border border-gray-300 rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"topics",className:"block text-sm font-medium text-gray-700 mb-1",children:"Topics (one per line)"}),(0,b.jsx)("textarea",{name:"topics",rows:"4",value:l,onChange:a=>m(a.target.value),placeholder:"Topic 1 Topic 2",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,b.jsx)("button",{type:"submit",className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:"new"===p?"Add Chapter & Topics":"Add More Topics"})]}),x.text&&(0,b.jsx)("div",{className:`p-4 mt-4 rounded-md text-center font-medium ${"success"===x.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.text})]}),j.subjectId&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Existing Chapters"}),t?(0,b.jsx)("p",{children:"Loading chapters..."}):n.length>0?(0,b.jsx)("div",{className:"space-y-3",children:n.map(a=>(0,b.jsxs)("details",{className:"group bg-white rounded-lg border border-gray-200",children:[(0,b.jsxs)("summary",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50",children:[(0,b.jsxs)("span",{className:"font-medium text-gray-700",children:["Ch. ",a.Chapter_Number,": ",a.Chapter_Name]}),(0,b.jsx)("button",{type:"button",onClick:b=>{b.preventDefault(),q("addTopics"),s(a),k(b=>({...b,chapterNumber:a.Chapter_Number,chapterName:a.Chapter_Name})),m(""),y({type:"",text:""}),window.scrollTo({top:0,behavior:"smooth"})},className:"text-xs bg-indigo-100 text-indigo-700 font-semibold py-1 px-3 rounded-full hover:bg-indigo-200 z-10 transition-colors",children:"Add Topics"})]}),(0,b.jsx)("div",{className:"px-4 pb-3 border-t",children:a.topics.length>0?(0,b.jsx)("ul",{className:"list-disc list-inside mt-2 space-y-1 text-gray-600",children:a.topics.map((a,c)=>(0,b.jsx)("li",{children:a},c))}):(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"No topics for this chapter."})})]},a.id))}):(0,b.jsx)("p",{className:"text-gray-500",children:"No chapters found for this selection. Add one using the form above!"})]})]})})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7af6a18b._.js.map