{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anude/OneDrive/Documents/Elmind/elmind-website/src/app/verify_otp/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\n// Standard Components\r\nconst MenuBar = () => (\r\n    <nav className=\"w-full p-4 bg-white shadow-sm flex justify-between items-center\">\r\n        <div className=\"font-bold text-xl\">Elmind.</div>\r\n    </nav>\r\n);\r\n\r\nconst Footer = () => (\r\n    <footer className=\"w-full p-6 bg-gray-100 text-center text-gray-500 text-sm mt-auto\">\r\n        &copy; 2025 Elmind Inc.\r\n    </footer>\r\n);\r\n\r\nexport default function VerifyOTP() {\r\n    const [otp, setOtp] = useState(['', '', '', '', '', '']);\r\n    const [phone, setPhone] = useState(null);\r\n    const [timer, setTimer] = useState(60);\r\n    const [error, setError] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    \r\n    // Use useRef for values that shouldn't trigger re-renders but need to persist\r\n    const hasRan = useRef(false);\r\n\r\n    // 1. Phone Number Logic\r\n    useEffect(() => {\r\n        if (hasRan.current) return;\r\n        hasRan.current = true;\r\n\r\n        const storedPhone = localStorage.getItem('phoneNumber');\r\n        const CheckToken = localStorage.getItem('CheckToken');\r\n\r\n        console.log(`Phone number: ${storedPhone} \\nToken:${CheckToken}`);\r\n        \r\n        \r\n        if (storedPhone && CheckToken) {\r\n            setPhone(storedPhone);\r\n            // Optional: Keep it until success, or remove immediately depending on preference\r\n            localStorage.removeItem('CheckToken'); \r\n            console.log(localStorage.getItem('CheckToken'));\r\n            return;\r\n        }\r\n        localStorage.removeItem('CheckToken'); \r\n        // If no phone found, redirect\r\n        window.location.replace('/');\r\n    }, []);\r\n\r\n    // 2. Timer Logic (The missing piece)\r\n    useEffect(() => {\r\n        // Only set interval if timer is > 0\r\n        let interval;\r\n        if (timer > 0) {\r\n            interval = setInterval(() => {\r\n                setTimer((prev) => (prev > 0 ? prev - 1 : 0));\r\n            }, 1000);\r\n        }\r\n\r\n        // Cleanup interval on unmount or when timer changes\r\n        return () => clearInterval(interval);\r\n    }, [timer]);\r\n\r\n    const handleChange = (element, index) => {\r\n        if (isNaN(element.value)) return;\r\n        const newOtp = [...otp];\r\n        newOtp[index] = element.value;\r\n        setOtp(newOtp);\r\n        if (element.nextSibling && element.value) {\r\n            element.nextSibling.focus();\r\n        }\r\n    };\r\n\r\n    const handleVerify = async (e) => {\r\n        e.preventDefault();\r\n        const enteredCode = otp.join('');\r\n\r\n        if (enteredCode.length < 6) {\r\n            setError('Please enter the full 6-digit code.');\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const baseUrl = process.env.NEXT_PUBLIC_PUBLIC_URL;\r\n\r\n            const response = await fetch(`${baseUrl}/AccountManagingSystem/api/verify-otp`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    phone: phone,\r\n                    otp: enteredCode\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                const secureToken = data.token;\r\n\r\n                sessionStorage.setItem('elmind_access_token', secureToken);\r\n                sessionStorage.setItem('elmind_user_phone', phone);\r\n                sessionStorage.removeItem('elmind_page_visited');\r\n                localStorage.removeItem('phoneNumber');\r\n                window.location.href = '/MyAccount';\r\n\r\n            } else {\r\n                setError(data.message || 'Invalid Code');\r\n            }\r\n\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col min-h-screen bg-gray-50\">\r\n            <MenuBar />\r\n            <main className=\"flex-grow flex flex-col justify-center items-center p-4\">\r\n                <div className=\"w-full max-w-md bg-white rounded-2xl shadow-[5px_4px_0px_0px_#000000] border-2 border-black p-8\">\r\n                    <div className=\"text-center mb-8\">\r\n                        <h2 className=\"text-2xl font-bold text-gray-800\">Verify It's You</h2>\r\n                        <p className=\"text-gray-600 mt-2 text-sm\">\r\n                            Enter code sent to <span className=\"font-bold text-black\">{phone || \"...\"}</span>\r\n                        </p>\r\n                    </div>\r\n\r\n                    <form onSubmit={handleVerify} className=\"space-y-6\">\r\n                        <div className=\"flex justify-center gap-2\">\r\n                            {otp.map((data, index) => (\r\n                                <input\r\n                                    key={index}\r\n                                    type=\"text\"\r\n                                    maxLength=\"1\"\r\n                                    value={data}\r\n                                    onChange={e => handleChange(e.target, index)}\r\n                                    onFocus={e => e.target.select()}\r\n                                    className=\"w-12 h-12 text-center text-xl font-bold border-2 border-gray-300 rounded-lg focus:border-[#2AA5A3] focus:ring-2 focus:ring-[#2AA5A3]/50 outline-none transition-all\"\r\n                                />\r\n                            ))}\r\n                        </div>\r\n\r\n                        {error && <p className=\"text-red-500 text-center text-sm font-bold bg-red-50 p-2 rounded\">{error}</p>}\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isLoading}\r\n                            className=\"w-full bg-[#2AA5A3] shadow-[5px_4px_0px_0px_#000000] p-3 rounded-xl text-white font-semibold hover:-translate-y-1 active:translate-y-0 active:shadow-[2px_2px_0px_0px_#000000] transition-all\"\r\n                        >\r\n                            {isLoading ? 'Verifying...' : 'Verify Code'}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"text-center mt-6 text-sm text-gray-600\">\r\n                        {timer > 0 ? (\r\n                            <p>Resend code in <span className=\"font-bold text-[#2AA5A3]\">{timer}s</span></p>\r\n                        ) : (\r\n                            <button \r\n                                onClick={() => {\r\n                                    setTimer(60);\r\n                                    // Add resend API call logic here if needed\r\n                                    alert(\"Code resent!\");\r\n                                }} \r\n                                className=\"text-[#2AA5A3] font-bold hover:underline\"\r\n                            >\r\n                                Resend Code\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                    \r\n                    <div className=\"mt-4 text-center\">\r\n                        <p className=\"text-xs text-gray-400\">(Preview Tip: Use code 123456)</p>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n            <Footer />\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anude/OneDrive/Documents/Elmind/elmind-website/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anude/OneDrive/Documents/Elmind/elmind-website/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anude/OneDrive/Documents/Elmind/elmind-website/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}