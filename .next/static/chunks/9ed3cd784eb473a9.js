(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44168,e=>{"use strict";e.s(["default",()=>n]);var s=e.i(43476),t=e.i(71645);let r=()=>(0,s.jsxs)("nav",{className:"p-4 shadow bg-white flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-bold",children:"Elmind."}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Secure Session"})]}),o=()=>(0,s.jsx)("footer",{className:"p-4 text-center text-gray-500 text-xs",children:"Â© 2024 Elmind Inc."});function n(){let e=e=>{console.log("[Router Push]: ".concat(e)),"/login"===e&&alert("Success! Redirecting to Login Page...")},n=e=>{console.log("[Router Replace]: ".concat(e)),"/"===e&&alert("Security Redirect: Returning to Home/Login...")},[a,l]=(0,t.useState)(!1),[i,c]=(0,t.useState)({new:"",confirm:""}),[d,x]=(0,t.useState)({loading:!1,error:"",success:!1}),[m,u]=(0,t.useState)({token:"",phone:""});(0,t.useEffect)(()=>{let e=sessionStorage.getItem("elmind_access_token"),s=sessionStorage.getItem("elmind_user_phone");if(e&&s||(console.warn("Security Breach: No token found. Direct access attempt."),sessionStorage.getItem("elmind_access_token")||(console.log("Preview Mode: Simulating Token..."),sessionStorage.setItem("elmind_access_token","PREVIEW-TOKEN-123"),sessionStorage.setItem("elmind_user_phone","9876543210"))),sessionStorage.getItem("elmind_page_visited")){console.warn("Security Breach: Page Reload Detected."),sessionStorage.clear(),setTimeout(()=>{alert("Security Alert: Page reload detected. For your security, the session has been terminated."),n("/")},100),l(!1);return}sessionStorage.setItem("elmind_page_visited","true"),u({token:sessionStorage.getItem("elmind_access_token"),phone:sessionStorage.getItem("elmind_user_phone")}),l(!0)},[]);let g=async e=>{if(e.preventDefault(),x({...d,error:""}),!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/.test(i.new))return x({...d,error:"Password must be 6+ chars with Upper, Lower & Number."});if(i.new!==i.confirm)return x({...d,error:"Passwords don't match"});x({...d,loading:!0});try{await new Promise(e=>setTimeout(e,1500)),x({loading:!1,error:"",success:!0}),sessionStorage.clear()}catch(e){x({loading:!1,error:"Connection Failed",success:!1})}};return a?d.success?(0,s.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-[5px_4px_0px_0px_#2AA5A3] border-2 border-[#2AA5A3] p-8 text-center",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"ðŸŽ‰"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Password Changed!"}),(0,s.jsx)("p",{className:"mb-6 text-gray-600 text-sm",children:"Your account is secure. The session has been terminated."}),(0,s.jsx)("button",{onClick:()=>e("/login"),className:"w-full bg-black text-white font-bold p-3 rounded-xl shadow-lg hover:translate-y-1 transition-all",children:"Go to Login"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,s.jsx)(r,{}),(0,s.jsx)("div",{className:"flex-grow flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-[5px_5px_0px_0px_#000] border-2 border-black p-8 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 bg-red-50 text-red-500 text-[10px] font-bold px-3 py-1 border-b border-l border-red-100",children:"NO RELOAD ALLOWED"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Secure Reset"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mb-6",children:["Session ID: ",(0,s.jsx)("span",{className:"font-mono bg-gray-100 px-1 rounded",children:m.token?m.token.substring(0,8)+"...":"Loading..."})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mb-4 italic",children:"Note: Reloading this page will invalidate your session."}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-bold text-gray-700 uppercase",children:"New Password"}),(0,s.jsx)("input",{type:"password",placeholder:"Min 6 chars, Upper, Lower, Number",className:"w-full mt-1 p-3 border-2 border-gray-200 rounded-xl focus:border-[#2AA5A3] outline-none transition-colors",value:i.new,onChange:e=>c({...i,new:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-bold text-gray-700 uppercase",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",placeholder:"Retype password",className:"w-full mt-1 p-3 border-2 border-gray-200 rounded-xl focus:border-[#2AA5A3] outline-none transition-colors",value:i.confirm,onChange:e=>c({...i,confirm:e.target.value}),required:!0})]}),d.error&&(0,s.jsx)("p",{className:"text-red-500 text-xs font-bold text-center bg-red-50 p-2 rounded border border-red-100",children:d.error}),(0,s.jsx)("button",{type:"submit",disabled:d.loading,className:"w-full bg-[#2AA5A3] text-white font-bold py-4 rounded-xl shadow-[4px_4px_0px_0px_#000] hover:-translate-y-1 active:translate-y-0 active:shadow-none transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d.loading?"Securing Account...":"Reset Password"})]})]})}),(0,s.jsx)(o,{})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Verifying Security Token..."})]})})}}]);